(this.webpackJsonpkevinsmith3490final=this.webpackJsonpkevinsmith3490final||[]).push([[0],{12:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7),react_dom__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__),_index_css__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18),_index_css__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_7__),_App__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(19),_App__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_App__WEBPACK_IMPORTED_MODULE_8__),_reportWebVitals__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8),_serviceWorker__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9),mapbox_gl__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(0),mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_11__),jquery__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2),jquery__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_12__),lon=-78.8359,lat=35.7814;mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.accessToken="pk.eyJ1Ijoic21pdGhrcjYiLCJhIjoiY2s1eng5cXhkMDBqYzNrbGlxY2llamwzYiJ9.EiSYrIube_whxrve-t_47Q";var Application=function(_React$Component){Object(_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(Application,_React$Component);var _super=Object(_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(Application);function Application(e){var t;return Object(_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Application),(t=_super.call(this,e)).state={lng:lon,lat:lat,zoom:10,thread:"not loaded"},t}return Object(_Users_kevinsmith_Desktop_tes_kevinsmith3490final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Application,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,map=new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Map({container:this.mapContainer,style:"mapbox://styles/smithkr6/ck9jwp4v217uu1ippf9kjbzct",center:[-81.6806,36.2142],zoom:18.15});function cleanUp(e){return keepLine(getLine(e))?getLine(e)+cleanUp(removeTopLine(e)):cleanUp(removeTopLine(e))}function keepLine(e){return!!e.includes('"author"')||(!!e.includes('"title"')||(!!e.includes('"selftext"')||void 0))}function getLine(e){return"\n"!==e[0]?e[0]+getLine(e.substring(1)):"\n"}function removeTopLine(e){return"\n"!==e[0]?removeTopLine(e.substring(1)):e.substring(1)}function getDistance(e){return Math.sqrt(Math.pow(map.getCenter().lng-e.split(",")[0],2)+Math.pow(map.getCenter().lat-e.split(",")[1],2))}function grabFeedJSON(e){return jquery__WEBPACK_IMPORTED_MODULE_12___default.a.getJSON(e,(function(e){}))}map.on("move",(function(){_this2.setState({lng:map.getCenter().lng.toFixed(4),lat:map.getCenter().lat.toFixed(4),zoom:map.getZoom().toFixed(2)})}));var strtemp="",subreddit_link="https://www.reddit.com/r/unfortunateMap/.json";grabFeedJSON(subreddit_link).then((function(json_data){jquery__WEBPACK_IMPORTED_MODULE_12___default.a.each(json_data.data.children,(function(e,t){strtemp=strtemp+',{"rank":"'+e+'","title":'+JSON.stringify(t.data.title)+',"url":'+JSON.stringify(t.data.url)+',"author":'+JSON.stringify(t.data.author)+',"selftext":'+JSON.stringify(t.data.selftext)+',"dist_from":'+getDistance(t.data.title)+"}"})),strtemp='({"marker_previews":['+strtemp.substring(1)+"]})",console.log(strtemp);var new_json=eval("("+strtemp+")");jquery__WEBPACK_IMPORTED_MODULE_12___default.a.each(new_json.marker_previews,(function(e,t){var _=document.createElement("div");_.className="marker";var r=t.title.split(","),n=new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Marker(_),a=document.createElement("button");a.className=t.title.toString(),a.id=t.title.toString(),a.innerHTML="<h5>Show Comments</h5>",a.target=t.url+".json",a.onclick=function(){"<h5>Show Comments</h5>"===a.innerHTML?a.innerHTML="<h5>Hide Comments</h5>":"<h5>Hide Comments</h5>"===a.innerHTML&&(a.innerHTML="<h5>Show Comments</h5>"),updateSelectedMarker(a.target),console.log("CLICKED")};var i=document.createElement("div");i.className="section"+t.title.toString(),i.id="section"+t.title.toString(),i.innerHTML="<body><h3><b><i>"+t.title+"</i><br><sub>"+t.author+"</sub></b></h3><p>"+t.selftext+'</p><p><a href="'+t.url+'" target=_blank">comment</a></p></body>',i.appendChild(a),n.setLngLat(r).setPopup(new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Popup({offset:25}).setDOMContent(i)).addTo(map)}))}));var markerpost={title:"",author:"",body:"",replies:[]};function grabMarkerJSON(e){return jquery__WEBPACK_IMPORTED_MODULE_12___default.a.getJSON(e,(function(e){}))}function updateSelectedMarker(e){console.log("updateSelectedMarker reached"),grabMarkerJSON(e).then((function(e){function t(e){if("object"!==typeof e)return e;var _={},r=[];for(var n in e)r.push(n);for(var a in r.sort(),r)_[r[a]]=t(e[r[a]]);return _}function _(e){return'"author"'===n(e).substring(0,8)?e.split('\\"').join('"').split('"').slice(3).join('"').slice(0,-1):""}function r(e){return'"body"'===n(e).substring(0,6)?e.split('\\"').join('"').split('"').slice(3).join('"').slice(0,-1):""}function n(e){return void 0===e?"":e.split(" ").join("")}function a(e){if(void 0===e[0])return[""];if(void 0!==(i=e[0])||""!==_(i)||""!==r(i)){var t=function(e){return","===e[e.length-1]?e.substring(0,e.length-1):e}(e.shift()),n=a(e);return n.unshift(t),n}return e.shift(),a(e);var i}function i(e,t){return e.split("\n",t)}function o(e){return" "==e[0]?1+o(e.substring(1)):0}function s(e){return"<hr style = display: block; margin-top: 0.5em; margin-bottom: 0.5em; margin-left: auto; margin-right: auto; border-style: inset; border-width:"+e.toString()+'px;">'}function l(e){if(void 0!==e[0])return[(t=e[0],""!==_(t)?s(1)+'<div style="color: grey;margin-left: '+((o(t)-3)/5).toString()+'em;">'+_(t)+"</div>":""!==r(t)?'<div style="color: darkblue;margin-left: '+((o(t)-3)/5).toString()+'em;">-> '+r(t)+"</div>":void 0)].concat(l(e.slice(1)));var t}function u(e){return JSON.stringify(e,void 0,1)}function p(t){return"<body><h3><b><i>"+e[0].data.children[0].data.title+"</i><br><sub>"+e[0].data.children[0].data.author+"</sub></b></h3><p>"+e[0].data.children[0].data.selftext+"</p>"+s(3)+"<p>"+t.slice(1).join("")+"</p><body>"}markerpost={title:e[0].data.children[0].data.title,author:e[0].data.children[0].data.author,body:e[0].data.children[0].data.selftext},document.getElementById("section"+e[0].data.children[0].data.title.toString()).innerHTML=p(l(a(i(u(t(e)))))),popUpCal(e,p(l(a(i(u(t(e))))))),console.log("json data that is parsed\n"+JSON.stringify(e,void 0,4)),console.log("fullHTML\n"+p(l(a(i(u(t(e)))))))}))}function popUpCal(e,t){console.log("POPUP made"),alert("there will be 3 popups triggerd by that 'show comments' button that appears on each marker:\n--the json data that will be parsed into html (displayed as a string)\n--the parsed html\n--proof that the html displays"),window.open("","json","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=200").document.body.innerText="----------the json data received from this marker post made to the subreddit r/unfortunateMap:\n"+JSON.stringify(e),window.open("","rawhtml","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=200").document.body.innerText+="----------The html that was parsed from json is as follows:\n"+t,window.open("","html","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=200").document.body.innerHTML="<h3><b>Proof that the html properly displays:</b><br></h3>"+t}var marker=null,newMarkerCoord=null,dumpsterName,dumpsterComment,newMarkerBtn=document.createElement("button");newMarkerBtn.className="button",newMarkerBtn.innerHTML="New Marker",newMarkerBtn.id="newMarkerBtn";var sidebarStyle=document.getElementsByClassName("sidebarStyle")[0];sidebarStyle.appendChild(newMarkerBtn);var popup=new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Popup({offset:50});newMarkerBtn.addEventListener("click",(function(){if(sidebarStyle.appendChild(newMarkerBtn),null!=marker&&marker.isDraggable())newMarkerCoord=marker.getLngLat(),marker.setDraggable(!1),newMarkerBtn.innerHTML="reset",marker.setPopup(popup.setHTML("<h5> Spot Location </h5><p><"+marker.getLngLat().lng+", "+marker.getLngLat().lat+"></p><p>Say something about the dumpster</p>")).togglePopup(),marker.setPopup(popup.setHTML('Describe this location in a <a href="https://old.reddit.com/r/unfortunateMap/submit?title='+marker.getLngLat().lng+", "+marker.getLngLat().lat+'&selftext=true&text = https://unfortunatemap.icu" target="_blank" >comment</a></p>')).togglePopup();else{if(null!=marker&&!marker.isDraggable())return marker.remove(),marker.setDraggable(!0),marker=null,newMarkerBtn.innerHTML="New Marker",window.location.reload(),!1;newMarkerBtn.innerHTML="Confirm Position",(marker=new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Marker({draggable:!0}).setLngLat([map.getCenter().lng,map.getCenter().lat])).setPopup(new mapbox_gl__WEBPACK_IMPORTED_MODULE_11___default.a.Popup({offset:50}).setHTML("<h3> Drag this Marker </h3><h9><p>"+marker.getLngLat().lng+",\n "+marker.getLngLat().lat+"</p></h9>")),marker.addTo(map).togglePopup(),marker.on("drag",(function(){newMarkerBtn.innerHTML="<h3>Confirm Position</h3>\n<p>"+marker.getLngLat().lng+",\n"+marker.getLngLat().lat+"</p>",marker.setPopup(popup.setDOMContent(newMarkerBtn)).togglePopup()}))}}))}},{key:"render",value:function(){var e=this;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"sidebarStyle",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{children:["Longitude: ",this.state.lng," | Latitude: ",this.state.lat," | Zoom: ",this.state.zoom]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"})]})}}]),Application}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component);react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Application,{}),document.getElementById("app")),Object(_reportWebVitals__WEBPACK_IMPORTED_MODULE_9__.a)(),_serviceWorker__WEBPACK_IMPORTED_MODULE_10__.a()},18:function(e,t,_){},19:function(e,t){},8:function(e,t,_){"use strict";t.a=function(e){e&&e instanceof Function&&_.e(3).then(_.bind(null,20)).then((function(t){var _=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;_(e),r(e),n(e),a(e),i(e)}))}},9:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}}},[[12,1,2]]]);
//# sourceMappingURL=main.ff545621.chunk.js.map